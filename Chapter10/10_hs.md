# 10ì¥. ì¡°ê±´ë¶€ ë¡œì§ ê°„ì†Œí™”

## 10.1 ì¡°ê±´ë¬¸ ë¶„í•´í•˜ê¸°ğŸ‘

```tsx
// AS-IS
if (!aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd)) {
  charge = quantity * plan.summerRate;
} else {
  charge = quantity * plan.regularRate + plan.regularServiceCharge;
}

// TO-BE
if (summer()) {
  charge = summerCharge();
} else {
  charge = regularCharge();
}

// sol2 - ì‚¼í•­ ì—°ì‚°ì
charge = summer() ? summerCharge() : regularCharge();

function summer() {
  return !aDate.isBefore(plan.summerStart) && !aDate.isAfter(plan.summerEnd);
}
function summerCharge() {
  return quantity * plan.summerRate;
}
function regularCharge() {
  return quantity * plan.regularRate + plan.regularServiceCharge;
}
```

- ê±°ëŒ€í•œ ì½”ë“œë¥¼ ë¶€ìœ„ë³„ë¡œ ë¶„í•´í•œ í›„, ê° ë©ì–´ë¦¬ì˜ ì˜ë„ë¥¼ ì‚´ë¦° ì´ë¦„ì˜ í•¨ìˆ˜ í˜¸ì¶œë¡œ ë°”ê¿”ì¤„ ê²ƒ

## 10.2 ì¡°ê±´ì‹ í†µí•©í•˜ê¸°

```tsx
// AS-IS
if (anEmployee.seniority < 2) {
  return 0;
}
if (anEmployee.monthDisabled > 12) {
  return 0;
}
if (anEmployee.isPartTime) {
  return 0;
}

// TO-BE
if (isNotEligibleForDisability()) {
  return 0;
}

function isNotEligibleForDisability() {
  return (
    anEmployee.seniority < 2 ||
    anEmployee.monthDisabled < 12 ||
    anEmployee.isPartTime
  );
}
```

- ë¹„êµ ì¡°ê±´ì€ ë‹¤ë¥´ì§€ë§Œ ê²°ê³¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ë™ì‘ì´ ê°™ì€ ê²½ìš°
- andë‚˜ or ì—°ì‚°ìë¥¼ ì‚¬ìš©(&&, ||)
- ì¤‘ìš”í•œ ì´ìœ 
  - ì—¬ëŸ¬ ì¡°ê°ìœ¼ë¡œ ë‚˜ë‰œ ì¡°ê±´ì„ í•˜ë¼ë¡œ í†µí•©í•¨ìœ¼ë¡œì¨ í•˜ë ¤ëŠ” ì¼ì´ ëª…í™•í•´ì§
  - í•¨ìˆ˜ ì¶”ì¶œí•˜ê¸°(6.1)ê¹Œì§€ ì´ì–´ì§ˆ ê°€ëŠ¥ì„±ì´ ë†’ìŒ
- ë…ë¦½ëœ ê²€ì‚¬ë“¤ì´ë¼ íŒë‹¨ë˜ë©´ í•´ì„œëŠ” ì•ˆ ë¨

## 10.3 ì¤‘ì²© ë³´ì¡°ë¬¸ì„ ë³´í˜¸ êµ¬ë¬¸ìœ¼ë¡œ ë°”ê¾¸ê¸°ğŸ‘

```tsx
// AS-IS
function getPayAmount() {
  let result;

  if (isDead) {
    result = deadAmount();
  } else {
    if (isSeparated) {
      result = separateAmount();
    } else {
      if (isRetired) {
        result = retiredAmount();
      } else {
        result = normalPayAmount();
      }
    }
  }
}

// TO-BE
function getPayAmount() {
  if (isDead) {
    return deadAmount();
  }
  if (isSeparated) {
    return separateAmount();
  }
  if (isRetired) {
    return retiredAmount();
  }

  return normalPayAmount();
}
```

- ì¡°ê±´ë¬¸ ì‚¬ìš© í˜•íƒœ
  1. ë‘ ê²½ë¡œ ëª¨ë‘ ì •ìƒ ë™ì‘ â†’ if/elseë¬¸ ì‚¬ìš©
  2. í•œ ìª½ë§Œ ì •ìƒ â†’ ë³´í˜¸ êµ¬ë¬¸ ì‚¬ìš©
- **ë³´í˜¸ êµ¬ë¬¸(guard clause)**
  - ì¡°ê±´ë¬¸ì—ì„œ ë¹„ì •ìƒ ì¡°ê±´ì„ ifë¬¸ì—ì„œ ê²€ì‚¬í•œ ë‹¤ìŒ, ì¡°ê±´ì´ ì°¸ì´ë©´(=ë¹„ì •ìƒ) í•¨ìˆ˜ì—ì„œ ë¹ ì ¸ë‚˜ì˜¤ëŠ” í˜•íƒœ
  - â€œì´ê±´ í•¨ìˆ˜ì˜ í•µì‹¬ì´ ì•„ë‹ˆë‹¤â€ë¼ê³  ë§í•˜ëŠ” ê²ƒ

### ì˜ˆì‹œ2: ì¡°ê±´ ë°˜ëŒ€ë¡œ ë§Œë“¤ê¸°

```jsx
// TO-BE
function adjustedCapital(anInstrument) {
  let result = 0;
  if (anInstrument.capital > 0) {
    if (anInstrument.interestRate > 0 && anInstrument.duration > 0) {
      result =
        (anInstrument.income / anInstrument.duration) *
        anInstrument.adjustmentFactor;
    }
  }

  return result;
}

// ING - ì¡°ê±´ ì—­ìœ¼ë¡œ ë°”ê¾¸ê¸°
function adjustedCapital(anInstrument) {
  let result = 0;
  if (anInstrument.capital <= 0) return result;
  if (!(anInstrument.interestRate > 0 && anInstrument.duration > 0))
    return result;

  result =
    (anInstrument.income / anInstrument.duration) *
    anInstrument.adjustmentFactor;

  return result;
}

// AS-IS - ì¡°ê±´ì‹ í†µí•©
function adjustedCapital(anInstrument) {
  if (
    anInstrument.capital <= 0 ||
    anInstrument.interestRate <= 0 ||
    anInstrument.duration <= 0
  ) {
    return 0;
  }

  return (
    (anInstrument.income / anInstrument.duration) *
    anInstrument.adjustmentFactor
  );
}
```

- **TIP - ë“œ ëª¨ë¥´ê°„ì˜ ë²•ì¹™**

  - `!(A > 0 && B > 0)` === `(A <= || B <= 0)`

  ```jsx
  // CASE 1
  if (A && B) { // ì„±ê³µ }
  if (!A || !B) { // ì‹¤íŒ¨ }

  // CASE 2
  if (A || B) { // ì„±ê³µ }
  if (!A && !B) { // ì‹¤íŒ¨ }
  ```

## 10.4 ì¡°ê±´ë¶€ ë¡œì§ì„ ë‹¤í˜•ì„±ìœ¼ë¡œ ë°”ê¾¸ê¸°ğŸ‘

```tsx
// AS-IS
switch (bird.type) {
  case 'ìœ ëŸ½ ì œë¹„':
    return 'ë³´í†µì´ë‹¤';
  case 'ì•„í”„ë¦¬ì¹´ ì œë¹„':
    return bird.numberOfCoconuts > 2 ? 'ì§€ì³¤ë‹¤' : 'ë³´í†µì´ë‹¤';
  case 'ë…¸ë¥´ì›¨ì´ íŒŒë‘ ì•µë¬´':
    return bird.voltage > 100 ? 'ê·¸ì„ë ¸ë‹¤' : 'ì˜ˆì˜ë‹¤';
  default:
    return 'ì•Œ ìˆ˜ ì—†ë‹¤';
}

// TO-BE
class EuropeanSwallow {
  get plumage() {
    return 'ë³´í†µì´ë‹¤';
  }
}

class AfricanSwallow {
  get plumage() {
    return this.numberOfCoconuts > 2 ? 'ì§€ì³¤ë‹¤' : 'ë³´í†µì´ë‹¤';
  }
}

class NorwegianBlueParrot {
  get plumage() {
    return this.voltage > 100 ? 'ê·¸ì„ë ¸ë‹¤' : 'ì˜ˆì˜ë‹¤';
  }
}
```

- **ë‹¤í˜•ì„±(Polymorphism)**
  - ê° ìš”ì†Œë“¤ì´ ë‹¤ì–‘í•œ ìë£Œí˜•ì— ì†í•˜ëŠ” ê²ƒ
  - ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì˜ í•µì‹¬!
  -

## 10.5 íŠ¹ì´ ì¼€ì´ìŠ¤ ì¶”ê°€í•˜ê¸°

( = null ê²€ì‚¬ë¥¼ null ê°ì²´ì— ìœ„ì„)

```tsx
// AS-IS
if (aCustomer === 'ë¯¸í™•ì¸ ê³ ê°') customerName = 'ê±°ì£¼ì';

// TO-BE
class UnknownCustomer {
	get name () {return 'ê±°ì£¼ì';}
```

- íŠ¹ì´ ì¼€ì´ìŠ¤ íŒ¨í„´: íŠ¹ì • ë™ì‘ì— ëŒ€í•´ ë˜‘ê°™ì´ ë°˜ì‘í•˜ëŠ” ì½”ë“œë¥¼ ëª¨ì•„ ì‚¬ìš©
- nullì€ íŠ¹ì´ ì¼€ì´ìŠ¤ë¡œ ì²˜ë¦¬í•´ì•¼ í•  ë•Œê°€ ë§ê¸° ë•Œë¬¸ì— ë„ ê°ì²´ íŒ¨í„´ì´ë¼ ë¶ˆë¦¬ê¸°ë„ í•¨

## 10.6 ì–´ì„œì…˜ ì¶”ê°€í•˜ê¸°

```tsx
// AS-IS
if (this.discountRate) {
  base = base - this.discountRate * base;
}

// TO-BE
assert(this.discountRate >= 0);

if (this.discountRate) {
  base = base - this.discountRate * base;
}
```

- **ì–´ì„œì…˜(assertion)**: í•­ìƒ ì°¸ì´ë¼ê³  ê°€ì •í•˜ëŠ” ì¡°ê±´ë¶€ ë¬¸ì¥
  - íŠ¹ì • ë™ì‘ì´ ì°¸ì¼ ë•Œì—ë§Œ ì œëŒ€ë¡œ ë™ì‘í•˜ëŠ” ì½”ë“œì—ì„œ ìœ ìš©
    - ex) ì œê³±ê·¼ ê³„ì‚° - ë°˜ë“œì‹œ ì–‘ìˆ˜ì¼ ë•Œë§Œ ì •ìƒ ë™ì‘
  - ì–´ì„œì…˜ì˜ ìœ ë¬´ê°€ ë™ì‘ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šì•„ì•¼ í•¨
  - í”„ë¡œê·¸ë¨ì´ ì–´ë–¤ ìƒíƒœì„ì„ ê°€ì •í•œ ì±„ ì‹¤í–‰ë˜ëŠ”ì§€ ë‹¤ë¥¸ ê°œë°œìì—ê²Œ ì•Œë ¤ì£¼ëŠ” í›Œë¥­í•œ ì†Œí†µ ë„êµ¬
- (ì£¼ì˜!)
  - ì–´ì„œì…˜ì„ ë‚¨ë°œí•˜ì§€ ì•Šê³  â€˜ë°˜ë“œì‹œ ì°¸ì´ì–´ì•¼ í•˜ëŠ”â€™ ê²ƒë§Œ ê²€ì‚¬í•  ê²ƒ

## 10.7 ì œì–´ í”Œë˜ê·¸ë¥¼ íƒˆì¶œë¬¸ìœ¼ë¡œ ë°”ê¾¸ê¸°

```tsx
// AS-IS
for (const p of people) {
  if (!found) {
    if (p === 'ì¡°ì»¤') {
      sendAlert();
      found = true;
    }
  }
}

// TO-BE
for (const p of people) {
  if (p === 'ì¡°ì»¤') {
    sendAlert();
    break;
  }
}
```

- **ì œì–´í”Œë˜ê·¸**
  - ex) return, break, continue
  - ì½”ë“œì˜ ë™ì‘ì„ ë³€ê²½í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” ë³€ìˆ˜
  - ì£¼ë¡œ ë°˜ë³µë¬¸ì—ì„œ ì‚¬ìš©ë¨
