# 11ì¥. API ë¦¬íŒ©í„°ë§

## 1. ì§ˆì˜ í•¨ìˆ˜ì™€ ë³€ê²½ í•¨ìˆ˜ ë¶„ë¦¬í•˜ê¸°

- observable side effectê°€ ì—†ì´ ê°’ì„ ë°˜í™˜í•´ì£¼ëŠ” í•¨ìˆ˜ë¥¼ ì¶”êµ¬í•´ì•¼ í•œë‹¤.
    - íš¨ê³¼
        - ì–¸ì œ, ì–´ë””ì„œ í˜¸ì¶œí•´ë„ ë¬¸ì œ ì—†ìŒ
        - í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ì›€
        - ì˜®ê¸°ê¸° ì‰¬ì›€
    - ëª…ë ¹-ì§ˆì˜ ë¶„ë¦¬(command-query seperation)
        - ì§ˆì˜ í•¨ìˆ˜ëŠ” ë¶€ìˆ˜íš¨ê³¼ê°€ ì—†ì–´ì•¼ í•œë‹¤.
        - ê°’ì„ ë°˜í™˜í•˜ë©´ì„œ ë¶€ìˆ˜íš¨ê³¼ë„ ìˆëŠ” í•¨ìˆ˜ë¼ë©´, ìƒíƒœ ë³€ê²½í•˜ëŠ” ë¶€ë¶„ê³¼ ì§ˆì˜í•˜ëŠ” ë¶€ë¶„ì„ ë¶„ë¦¬í•˜ì!
    - ìºì‹±
        - ìš”ì²­ëœ ê°’ì„ ìºì‹œí•´ë‘ê³  ë‹¤ìŒë²ˆ í˜¸ì¶œ ë•Œ ë¹ ë¥´ê²Œ ì‘ë‹µí•˜ëŠ” í”í•œ ìµœì í™” ê¸°ë²•
        - ê°ì²´ì˜ ìƒíƒœë¥¼ ë³€ê²½í•˜ì§€ë§Œ, ê°ì²´ ë°–ì—ì„œëŠ” ê´€ì°°í•  ìˆ˜ ì—†ìŒ.
        - = ì¦‰, observable side effectê°€ ì—†ìŒ

```jsx
// AS-IS
function getTotalOutstandingAndSendBill() {
  const result = customer.invoices.reduce((total, each) => each.amount + total, 0);
  sendBill();
  return result;
}

// TO-BE
function totalOutstanding() {
  return customer.invoices.reduce((total, each) => each.amount + total, 0);
}

function sendBill() {
  emailGateway.send(formatBill(customer))
}
```

## 2. í•¨ìˆ˜ ë§¤ê°œë³€ìˆ˜í™”í•˜ê¸°

- ë¡œì§ì´ ë§¤ìš° ë¹„ìŠ·í•˜ê³ , ë‹¨ì§€ ë¦¬í„°ëŸ´ ê°’ë§Œ ë‹¤ë¥¸ ê²½ìš° ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜ë¡œ ì¤‘ë³µ ì œê±°

### ì˜ˆì œ1. ë§¤ê°œë³€ìˆ˜í•´ì•¼ í•˜ëŠ” ê²ƒì´ ì˜ ë³´ì„(easy)

```jsx
// AS-IS
function tenPercentRaise(aPerson) {
  aPerson.salary = aPerson.salary.multiply(1.1);
}

function fivePercentRaise(aPerson) {
  aPerson.salary = aPerson.salary.multiply(1.05);
}

// TO-BE
function raise(aPerson, factor) {
  aPerson.salary = aPerson.salary.multiply(1 + factor)
}
```

### ì˜ˆì œ2. ë§¤ê°œë³€ìˆ˜í•´ì•¼ í•˜ëŠ” ê²ƒì´ ì˜ ë³´ì´ì§€ ì•ŠëŠ” ê²½ìš°(hard)

```jsx
// AS-IS
function baseCharge(usage) {
  if (usage < 0) return usd(0);
  const amount = bottomBand(usage) * 0.03 + middleBand(usage) * 0.05 + topBand(usage) * 0.07;
  return usd(amount)
}

function bottomBand(usage) {
  return Math.min(usage, 100);
}

function middleBand(usage) {
  return usage > 100 ? Math.min(usage, 200) - 100 : 0;
}

function topBand(usage) {
  return usage > 200 ? usage - 200 : 0;
}
```

```jsx
// TO-BE
function withinBand(usage, bottom, top) {
  return usage > bottom ? Math.min(usage, top) - bottom : 0;
}

function baseCharge(usage) {
  if (usage < 0) return usd(0);
  const amount = withinBand(usage, 0, 100) * 0.03
    + withinBand(usage, 100, 200) * 0.05
    + withinBand(usage, 200, Infinity) * 0.07;
  return usd(amount)
}
```

## 3. í”Œë˜ê·¸ ì¸ìˆ˜ ì œê±°í•˜ê¸°

- í”Œë˜ê·¸ ì¸ìˆ˜(flag argument)
    - í•¨ìˆ˜ê°€ ì‹¤í–‰í•  ë¡œì§ì„ í˜¸ì¶œí•˜ëŠ” ìª½ì—ì„œ ì„ íƒí•˜ê¸° ìœ„í•´ ì „ë‹¬í•˜ëŠ” ì¸ìˆ˜
    - ë‹¨ì 
        - í•¨ìˆ˜ì˜ ê¸°ëŠ¥ì´ ì˜ ë“¤ì–´ë‚˜ì§€ ì•ŠìŒ (íŠ¹íˆ boolean flag)
        - í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ë“¤ì´ ë¬´ì—‡ì¸ì§€, ì–´ë–»ê²Œ í˜¸ì¶œí•´ì•¼ í•˜ëŠ”ì§€ ì´í•´í•˜ê¸° ì–´ë ¤ì›€
    - Tips
        - íŠ¹ì •í•œ ê¸°ëŠ¥ í•˜ë‚˜ë§Œ ìˆ˜í–‰í•˜ëŠ” ëª…ì‹œì ì¸ í•¨ìˆ˜ë¥¼ ì œê³µí•˜ëŠ”í¸ì´ ê¹”ë”
            - ê¹Œë‹¤ë¡œìš´ ì¼€ì´ìŠ¤ì˜ ê²½ìš° Wrapping í•¨ìˆ˜ ì‚¬ìš©
        - í”Œë˜ê·¸ ì¸ìˆ˜ê°€ ë‘˜ ì´ìƒì´ë©´ í•¨ìˆ˜ í•˜ë‚˜ê°€ ë§ì€ ì¼ì„ ì²˜ë¦¬í•˜ê³  ìˆë‹¤ëŠ” ì‹ í˜¸

```jsx
// AS-IS
function deliveryDate(anOrder, isRush) {
  if (isRush) {
    let deliveryTime;
    if (["MA", "CT"].includes(anOrder.deliveryState)) deliveryTime = 1;
    else if (["NY", "NH"].includes(anOrder.deliveryState)) deliveryTime = 2;
    else deliveryTime = 3;
    return anOrder.placedOn.plusDays(1 + deliveryTime);
  } else {
    let deliveryTime;
    if (["MA", "CT", "NY"].includes(anOrder.deliveryState)) deliveryTime = 2;
    else if (["ME", "NH"].includes(anOrder.deliveryState)) deliveryTime = 3;
    else deliveryTime = 4;
    return anOrder.placedOn.plusDays(2 + deliveryTime);
  }
}
// í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ
aShipment.deliveryDate = deliveryDate(anOrder, true);

aShipment.deliveryDate = deliveryDate(anOrder, false);
```

```jsx
// TO-BE
function rushDeliveryDate(anOrder) {
  let deliveryTime;
  if (["MA", "CT"].includes(anOrder.deliveryState)) deliveryTime = 1;
  else if (["NY", "NH"].includes(anOrder.deliveryState)) deliveryTime = 2;
  else deliveryTime = 3;
  return anOrder.placedOn.plusDays(1 + deliveryTime);
}

function regularDeliveryDate(anOrder) {
  let deliveryTime;
  if (["MA", "CT", "NY"].includes(anOrder.deliveryState)) deliveryTime = 2;
  else if (["ME", "NH"].includes(anOrder.deliveryState)) deliveryTime = 3;
  else deliveryTime = 4;
  return anOrder.placedOn.plusDays(2 + deliveryTime);
}

// í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ
aShipment.deliveryDate = rushDeliveryDate(anOrder);
aShipment.deliveryDate = regularDeliveryDate(anOrder);

// ê¹Œë‹¤ë¡œìš´ ì¼€ì´ìŠ¤ì˜ ê²½ìš°, Wrapping í•¨ìˆ˜ ì‚¬ìš©
function rushDeliveryDate(anOrder) { return deliveryDate(anOrder, true) }
function regularDeliveryDate(anOrder) { return deliveryDate(anOrder, false) }
```

## 4. ê°ì²´ í†µì§¸ë¡œ ë„˜ê¸°ê¸°

- í•˜ë‚˜ì˜ ë ˆì½”ë“œì—ì„œ ì—¬ëŸ¬ê°œì˜ ê°’ì„ ì¸ìˆ˜ë¡œ ë„˜ê¸°ëŠ” ê²½ìš°, ë ˆì½”ë“œë¥¼ í†µì§¸ë¡œ ë„˜ê¸°ëŠ” ê²ƒì´ ë‚«ë‹¤
- ë‹¨, í•¨ìˆ˜ê°€ ë ˆì½”ë“œ ìì²´ì— ì˜ì¡´í•˜ê¸° ì›ì¹˜ ì•Šì„ë•ŒëŠ” ì´ ë¦¬íŒ©í„°ë§ì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ex) ë ˆì½”ë“œì™€ í•¨ìˆ˜ê°€ ì„œë¡œ ë‹¤ë¥¸ ëª¨ë“ˆì— ì†í•œ ìƒí™©
- Tips
    - í•œ ê°ì²´ê°€ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ ì¤‘ í•­ìƒ ë˜‘ê°™ì€ ì¼ë¶€ë§Œ ì‚¬ìš©í•˜ëŠ” ì½”ë“œê°€ ë§ë‹¤ë©´, ê·¸ ê¸°ëŠ¥ë§Œ ë¬¶ì–´ì„œ í´ë˜ìŠ¤ë¡œ ì¶”ì¶œí•œë‹¤.
    - ë°ì´í„°ë¥¼ ì—¬ëŸ¬ê°œ ê±´ë„¤ì•¼ í•˜ëŠ” ê²½ìš°, ë°ì´í„° ì—¬ëŸ¬ê°œ ëŒ€ì‹  ìì‹ ì˜ ì°¸ì¡°ë¥¼ ì „ë‹¬í•œë‹¤.
        - ex) this

```jsx
// AS-IS
const low = aRoom.daysTempRange.low;
const high = aRoom.daysTempRange.high;
if (!aPlan.withinRange(low, high))
  alerts.push("ë°© ì˜¨ë„ê°€ ì§€ì • ë²”ìœ„ë¥¼ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤.");

class HeatingPlan {
  withinRange(bottom, top) {
    return (bottom >= this._temperatureRange.low)
      && (top <= this._temperatureRange.high);
  }
}

// TO-BE
if (!aPlan.withinRange(aRoom.daysTempRange))
  alerts.push("ë°© ì˜¨ë„ê°€ ì§€ì • ë²”ìœ„ë¥¼ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤.");

class HeatingPlan {
  withinRange({ low: bottom, high: top }) {
    return (bottom >= this._temperatureRange.low)
      && (top <= this._temperatureRange.high);
  }
}
```

## 5. ë§¤ê°œë³€ìˆ˜ë¥¼ ì§ˆì˜ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê¸°

- ë§¤ê°œë³€ìˆ˜ì˜ ëª©ë¡ì˜ ì¤‘ë³µ
    - ì§ˆì˜ í•¨ìˆ˜ë¡œ ë§¤ê°œ ë³€ìˆ˜ ëª©ë¡ì„ ê³µí†µí™” í•  ìˆ˜ ìˆë‹¤.
    - ë‹¤ë¥¸ ë§¤ê°œë³€ìˆ˜ì—ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” ê°’ì„ ë³„ë„ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” ê²ƒì€ ì•„ë¬´ ì˜ë¯¸ê°€ ì—†ë‹¤.
    - ë§¤ê°œë³€ìˆ˜ê°€ ì§§ì„ìˆ˜ë¡ ì´í•´í•˜ê¸° ì‰½ë‹¤.
- Tips
    - ì±…ì„ ì†Œì¬ë¥¼ í”¼í˜¸ì¶œ í•¨ìˆ˜ë¡œ ì˜®ê¸°ì
        - = í˜¸ì¶œí•˜ëŠ” ìª½ ì½”ë“œë¥¼ ê°„ì†Œí™” í•˜ì!
    - ì œê±°í•˜ë ¤ëŠ” ë§¤ê°œë³€ìˆ˜ì˜ ê°’ì„ ë‹¤ë¥¸ ë§¤ê°œë³€ìˆ˜ì— ì§ˆì˜í•´ì„œ ì–»ì„ ìˆ˜ ìˆë‹¤ë©´ ì•ˆì‹¬í•˜ê³  ì§ˆì˜ í•¨ìˆ˜ë¡œ ë³€ê²½í•´ë„ ëœë‹¤.
    - ì ìš©í•˜ê¸° ì–´ë ¤ìš´ ì˜ˆ
        - í”¼í˜¸ì¶œ í•¨ìˆ˜ì— ìƒˆë¡œìš´ ì˜ì¡´ì„±ì´ ìƒê¸°ê±°ë‚˜ ì œê±°í•˜ê³  ì‹¶ì€ ê¸°ì¡´ ì˜ì¡´ì„±ì„ ê°•í™”í•˜ëŠ” ê²½ìš°
    - ëŒ€ìƒ í•¨ìˆ˜ê°€ referential transparency(ì°¸ì¡° íˆ¬ëª…) í•´ì•¼ í•œë‹¤.
        - í•¨ìˆ˜ì— ë˜‘ê°™ì€ ê°’ì„ ë„£ìœ¼ë©´ í•­ìƒ ë˜‘ê°™ì´ ë™ì‘

```jsx
// AS-IS
class Order {
  get finalPrice() {
    const basePrice = this.quantity * this.itemPrice;
    let discountLevel;
    if (this.quantity > 100) discountLevel = 2;
    else discountLevel = 1;
    return this.discountedPrice(basePrice, discountLevel)
  }

  discountedPrice(basePrice, discountLevel) {
    switch (discountLevel) {
      case 1: return basePrice * 0.95;
      case 2: return basePrice * 0.9;
    }
  }
}

// TO-BE
class Order {
  get finalPrice() {
    const basePrice = this.quantity * this.itemPrice;

    return this.discountedPrice(basePrice)
  }

  get discountLevel() {
    return (this.quantity > 100) ? 2 : 1;
  }

  discountedPrice(basePrice) {
    switch (this.discountLevel) {
      case 1: return basePrice * 0.95;
      case 2: return basePrice * 0.9;
    }
  }
}
```

## 6. ì§ˆì˜ í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°”ê¾¸ê¸°

- ì°¸ì¡° ì œê±°
    - ì „ì—­ë³€ìˆ˜, ì œê±°ê°€ í•„ìš”í•œ ì›ì†Œë¥¼ ì°¸ì¡°í•˜ëŠ” ê²½ìš° ë§¤ê°œë³€ìˆ˜ë¡œ ë°”ê¿€ ìˆ˜ ìˆë‹¤.
    - referential transparency(ì°¸ì¡° íˆ¬ëª…) í•˜ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.
- Tips
    - ì±…ì„ì„ í˜¸ì¶œìë¡œ ì˜®ê¸°ì!
    - ë‹¨ì 
        - ì§ˆì˜ í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°”ê¾¸ë©´ ì–´ë–¤ ê°’ì„ ì œê³µí• ì§€ë¥¼ í˜¸ì¶œìê°€ ì•Œì•„ì•¼í•˜ë¯€ë¡œ ë³µì¡í•´ì§„ë‹¤.

```jsx
// AS-IS
class HeatingPlan {
  get targetTemperature() {
    if (thermostat.selectedTemperature > this._max) return this._max;
    else if (thermostat.selectedTemperature < this._min) return this._min;
    else return thermostat.selectedTemperature;
  }
}

// í´ë¼ì´ì–¸íŠ¸
if (thePlan.targetTemperature > thermostat.currentTemperature) setToHeat();
else if (thePlan.targetTemperature < thermostat.currentTemperature) setToCool();
else setOff();

// TO-BE
class HeatingPlan {
  targetTemperature(selectedTemperature) {
    if (selectedTemperature > this._max) return this._max;
    else if (selectedTemperature < this._min) return this._min;
    else return selectedTemperature;
  }
}

// í´ë¼ì´ì–¸íŠ¸
if (thePlan.targetTemperature(thermostat.selectedTemperature) > thermostat.currentTemperature) setToHeat();
else if (thePlan.targetTemperature(thermostat.selectedTemperature) < thermostat.currentTemperature) setToCool();
else setOff();
```

## 7. ì„¸í„° ì œê±°í•˜ê¸°

- ê°ì²´ ìƒì„± í›„ì— ìˆ˜ì •ë˜ì§€ ì•Šê¸¸ ì›í•˜ëŠ” í•„ë“œê°€ ìˆë‹¤ë©´, ì„¸í„°ë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
    - ê·¸ë ‡ë‹¤ë©´, í•„ë“œëŠ” ì˜¤ì§ ìƒì„±ìì—ì„œë§Œ ì„¤ì •ë˜ë©° ë³€ê²½ ê°€ëŠ¥ì„±ì´ ë´‰ì‡„
- ì ìš©í•˜ë©´ ì¢‹ì€ ì˜ˆ
    - ë¬´ì¡°ê±´ ì ‘ê·¼ì ë©”ì„œë“œë¥¼ í†µí•´ì„œë§Œ í•„ë“œë¥¼ ë‹¤ë¤„ì•¼ í•˜ëŠ” ê²½ìš°
    - í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìƒì„± ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•´ì„œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°
        - ìƒì„± ìŠ¤í¬ë¦½íŠ¸ë€, ìƒì„±ì í˜¸ì¶œ ë‹¨ê³„ì—ì„œ ì¼ë ¨ì˜ ì„¸í„°ë¥¼ í˜¸ì¶œí•˜ì—¬ ê°ì²´ë¥¼ ì™„ì„±

```jsx
// AS-IS
class Person {
  get name() { return this._name; }
  set name(arg) { this._name = arg; }
  get id() { return this._id; }
  set id(arg) { this._id = arg; }
}

// í´ë¼ì´ì–¸íŠ¸
const martin = new Person();
marin.name = "ë§ˆí‹´";
martin.id = "1234";

// TO-BE
class Person {
  constructor(id) {
    this.id = id;
  }
  get name() { return this._name; }
  set name(arg) { this._name = arg; }
  get id() { return this._id; }
}

// í´ë¼ì´ì–¸íŠ¸
const martin = new Person();
marin.name = "ë§ˆí‹´";
```

## 8. ìƒì„±ìë¥¼ íŒ©í„°ë¦¬ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê¸°

- ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í• ë•Œ ì£¼ë¡œ ìƒì„±ìë¥¼ í˜¸ì¶œí•œë‹¤.
- ì ìš©í•˜ë©´ ì¢‹ì€ ì˜ˆ
    - ìƒì„±ìì— ì œì•½ì´ ë”°ë¥´ëŠ” ê²½ìš°
        - ex) ìë°” ìƒì„±ìëŠ” ë°˜ë“œì‹œ ê·¸ ìƒì„±ìë¥¼ ì •ì˜í•œ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•´ì•¼ í•¨.
    - ìƒì„±ìì˜ ì´ë¦„ì´ ê³ ì •ë˜ì–´, ì ì ˆí•œ ì´ë¦„ì„ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš°
    - new ì—°ì‚°ìë¡œ ì¸í•´ ì¼ë°˜ í•¨ìˆ˜ì™€ ê°™ì´ ì‚¬ìš©í•˜ê¸° ì–´ë ¤ìš´ ê²½ìš°

```jsx
// AS-IS
class Employee {
  constructor(name, typeCode) {
    this._name = name;
    this._typeCode = typeCode;
  }

  get name() { return this._name; }
  get type() {
    return Employee.legalTypeCodes[this._typeCode];
  }
  static get legalTypeCodes() {
    return { "E": "Engineers", "M": "Manager", "S": "Salesperson" };
  }
}

// í´ë¼ì´ì–¸íŠ¸
candidate = new Employee(document.name, document.empType);

const leadEngineer = new Employee(document.leadEngineer, 'E');
```

```jsx
// TO-BE
function createEmployee(name, typeCode) {
  return new Employee(name, typeCode);
}

function createEngineer(name) {
  return new Employee(name, 'E');
}

class Employee {
  constructor(name, typeCode) {
    this._name = name;
    this._typeCode = typeCode;
  }

  get name() { return this._name; }
  get type() {
    return Employee.legalTypeCodes[this._typeCode];
  }
  static get legalTypeCodes() {
    return { "E": "Engineers", "M": "Manager", "S": "Salesperson" };
  }
}

// í´ë¼ì´ì–¸íŠ¸
candidate = createEmployee(document.name, document.empType);

const leadEngineer = createEngineer(document.leadEngineer);
```

## 9. í•¨ìˆ˜ë¥¼ ëª…ë ¹(excute)ìœ¼ë¡œ ë°”ê¾¸ê¸°

- í•¨ìˆ˜ë¥¼ í•¨ìˆ˜ë§Œì„ ìœ„í•œ ê°ì²´ ì•ˆìœ¼ë¡œ ìº¡ìŠí™” í•˜ë©´ ë” ìœ ìš©í•´ì§€ëŠ” ê²½ìš°ê°€ ìˆë‹¤.
- ëª…ë ¹ ê°ì²´ = ëª…ë ¹(command)
    - ëª…ë ¹ ê°ì²´ ëŒ€ë¶€ë¶„ì€ ë©”ì„œë“œ í•˜ë‚˜ë¡œ êµ¬ì„±
    - ì´ ë©”ì„œë“œë¥¼ ìš”ì²­í•´ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì´ ê°ì²´ì˜ ëª©ì 
    - ì¥ì 
        - ë˜ëŒë¦¬ê¸°(undo)ì™€ ê°™ì€ ë³´ì¡° ì—°ì‚° ì œê³µ ê°€ëŠ¥
        - ë§¤ê°œë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” ë©”ì„œë“œ(ìˆ˜ëª…ì£¼ê¸°ë¥¼ ì •ë°€í•˜ê²Œ ì œì–´) ì œê³µ ê°€ëŠ¥
        - ìƒì†ê³¼ í›…(hook)ì„ ì´ìš©í•´ ë§ì¶¤í˜•ìœ¼ë¡œ êµ¬í˜„ ê°€ëŠ¥
        - ì¼ê¸‰ í•¨ìˆ˜ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ í‰ë‚´ ë‚¼ ìˆ˜ ìˆìŒ
        - ì¤‘ì²©í•¨ìˆ˜ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ì–¸ì–´ì—ì„œ ë³µì¡í•œ í•¨ìˆ˜ ì˜ê²Œ ìª¼ê°œê¸° ê°€ëŠ¥
- Tips
    - ì¼ê¸‰ í•¨ìˆ˜ì™€ ëª…ë ¹ ì¤‘ ì„ íƒí•´ì•¼ í•œë‹¤ë©´, 95% ì¼ê¸‰í•¨ìˆ˜ê°€ ë” ì¤‘ìš”.
    - ëª…ë ¹ë³´ë‹¤ ë” ê°„ë‹¨í•œ ë°©ì‹ì´ ì—†ëŠ” ê²½ìš°ì—ë§Œ ì„ íƒ

### ì˜ˆì œ. ë³µì¡í•œ í•¨ìˆ˜ë¥¼ ì˜ê²Œ ìª¼ê°œê¸°

```jsx
// AS-IS
function score(candidate, medicalExam, scoringGuide) {
  let result = 0;
  let healthLevel = 0;
  let highMedicalRiskFlag = false;

  if (medicalExam.isSmoker) {
    healthLevel += 10;
    highMedicalRiskFlag = true;
  }
  let certificationGrade = "regular";
  if (scoringGuide.stateWithLowCertification(candidate.originState)) {
    certificationGrade = "low";
    result -= 5;
  }
  result -= Math.max(healthLevel - 5, 0);
  return result;
}
```

ğŸ“ ì§ˆë¬¸! ì—¬ê¸°ì„œ ë” í•¨ìˆ˜ë¥¼ ì˜ê²Œ ìª¼ê°œë³´ì‹œì˜¤

```jsx
// TO-BE
function score(candidate, medicalExam, scoringGuide) {
  return new Scorer(candidate, medicalExam, scoringGuide).excute();
}

class Scorer {
  constructor(candidate, medicalExam, scoringGuide) {
    this._candidate = candidate;
    this._medicalExam = medicalExam;
    this._scoringGuide = scoringGuide
  }

  excute() {
    this._result = 0;
    this._healthLevel = 0;
    this._highMedicalRiskFlag = false;

    this.scoreSmoking();

    this._certificationGrade = "regular";
    if (this._scoringGuide.stateWithLowCertification(this._candidate.originState)) {
      this._certificationGrade = "low";
      this._result -= 5;
    }

    this._result -= Math.max(this._healthLevel - 5, 0);
    return this._result;
  }

  scoreSmoking() {
    if (this._medicalExam.isSmoker) {
      this._healthLevel += 10;
      this._highMedicalRiskFlag = true;
    }
  }
}
```

## 10. ëª…ë ¹ì„ í•¨ìˆ˜ë¡œ ë°”ê¾¸ê¸°

- ëª…ë ¹ ê°ì²´ = ëª…ë ¹(command)
    - ë‹¨ì 
        - ë¡œì§ì´ í¬ê²Œ ë³µì¡í•˜ì§€ ì•Šì€ ê²½ìš°, ì˜¤ë²„ìŠ¤í™ â†’ í‰ë²”í•œ í•¨ìˆ˜ë¡œ ë°”ê¿”ì£¼ëŠ”ê²Œ ì¢‹ë‹¤.
    - ì¥ì 
        - ë³µì¡í•œ ì—°ì‚°ì„ ë‹¤ë£° ìˆ˜ ìˆëŠ” ê°•ë ¥í•œ ë©”ì»¤ë‹ˆì¦˜ ì œê³µ
        - í° ì—°ì‚° â†’ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ë©”ì„œë“œë¡œ ìª¼ê°œê¸°, ë©”ì„œë“œë“¤ë¼ë¦¬ ì •ë³´ ê³µìœ 

```jsx
// AS-IS
class ChargeCalculator {
  constructor(customer, usage, provider) {
    this._customer = customer;
    this._usage = usage;
    this._provicer = provider;
  }
  get baseCharge() {
    return this._customer.baseRate * this._usage;
  }
  get charge() {
    return this.baseCharge + this._provicer.connectionCharge;
  }
}
// í´ë¼ì´ì–¸íŠ¸
monthCharge = new ChargeCaculator(customer, usage, provider).charge;

// TO-BE
function charge(customer, usage, provider) {
  const baseCharge = customer.baseRate * usage;
  return baseCharge + provider.connectionCharge;
}

// í´ë¼ì´ì–¸íŠ¸
monthCharge = charge(customer, usage, provider);
```

## 11. ìˆ˜ì •ëœ ê°’ ë°˜í™˜í•˜ê¸°

- ë°ì´í„°ê°€ ì–´ë–»ê²Œ ìˆ˜ì •ë˜ëŠ”ì§€ ì¶”ì ì€ ë§¤ìš° ì–´ë ¤ì›€
- ë°ì´í„° ìˆ˜ì •ë¨ì„ ì•Œë ¤ì£¼ëŠ” ì¢‹ì€ ë°©ë²•
    - í•¨ìˆ˜ì—ì„œ ìˆ˜ì •ëœ ê°’ì„ ë°˜í™˜í•˜ì—¬ í˜¸ì¶œìê°€ ê·¸ ê°’ì„ ë³€ìˆ˜ì— ì €ì¥í•˜ë„ë¡ í•˜ì.
    - í˜¸ì¶œì ì½”ë“œë¥¼ ì½ì„ ë•Œ ë³€ìˆ˜ê°€ ê°±ì‹¤ë  ê²ƒì„ì„ ë¶„ëª…íˆ ì¸ì§€í•  ìˆ˜ ìˆìŒ.
    - ë³€ìˆ˜ì˜ ê°’ì„ ë‹¨ í•œë²ˆë§Œ ì •í•˜ë©´ ë  ë•Œ íŠ¹íˆ ìœ ìš©.
- Tips
    - ì ìš©í•˜ë©´ ì¢‹ì€ ì˜ˆ
        - ê°’ í•˜ë‚˜ë¥¼ ê³„ì‚°í•˜ëŠ” ë¶„ëª…í•œ ëª©ì ì´ ìˆëŠ” í•¨ìˆ˜ì— íš¨ê³¼ì 
    - ì ìš©í•˜ê¸° ì–´ë ¤ìš´ ì˜ˆ
        - ì—¬ëŸ¬ê°œì˜ ê°’ì„ ê°±ì‹ í•˜ëŠ” í•¨ìˆ˜ì—ëŠ” íš¨ê³¼ì ì´ì§€ ì•ŠìŒ
        - í•¨ìˆ˜ ì˜®ê¸°ê¸° ë¦¬í™í† ë§ ì´ì „ì— ì¤€ë¹„ì‘ì—…ìœ¼ë¡œ ì ìš©í•˜ê¸° ì¢‹ì€ ë¦¬íŒ©í† ë§

```jsx
// AS-IS
let totalAscent = 0;
let totalTime = 0;
let totalDistance = 0;
calculateAscent();
calculateTime();
calculateDistance();
const pace = totalTime / 60 / totalDistance;

function calculateAscent() {
  for (let i = 1; i < points.length; i++) {
    const verticalChange = points[i].elevation - points[i - 1].elevation;
    totalAscent += verticalChange > 0 ? verticalChange : 0;
  }
}

// TO-BE
const totalAscent = calculateAscent();
const totalTime = calculateTime();
const totalDistance = calculateDistance();
const pace = totalTime / 60 / totalDistance;

function calculateAscent() {
  let result = 0;
  for (let i = 1; i < points.length; i++) {
    const verticalChange = points[i].elevation - points[i - 1].elevation;
    result += verticalChange > 0 ? verticalChange : 0;
  }
  return result;
}
```

## 12. ì˜¤ë¥˜ ì½”ë“œë¥¼ ì˜ˆì™¸ë¡œ ë°”ê¾¸ê¸°

- ì˜ˆì „ì—ëŠ” ì˜¤ë¥˜ ì½”ë“œ(error code)ë¥¼ ì‚¬ìš©í•˜ëŠ”ê²Œ ë³´í¸ì ì´ì—ˆìœ¼ë¯€ë¡œ í•¨ìˆ˜ í˜¸ì¶œì‹œ ì–¸ì œë“  ì˜¤ë¥˜ê°€ ë°˜í™˜ë  ìˆ˜ ìˆì—ˆê³ , ì˜¤ë¥˜ ê²€ì‚¬ ì½”ë“œë¥¼ ë¹¼ë¨¹ìœ¼ë©´ ì•ˆ ëë‹¤.
- ì˜ˆì™¸ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œ ì œê³µí•˜ëŠ” ë…ë¦½ì ì¸ ì˜¤ë¥˜ ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ì´ë‹¤.
    - ì˜¤ë¥˜ê°€ ë°œê²¬ë˜ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§„ë‹¤. ê·¸ëŸ¬ë©´ ì ì ˆí•œ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ë¥¼ ì°¾ì„ ë•Œê¹Œì§€ ì½œìŠ¤íƒì„ íƒ€ê³  ìœ„ë¡œ ì „íŒŒëœë‹¤.
- ì˜ˆì™¸ ë°œìƒ vs ì˜¤ë¥˜ ê²€ì¸¨
    
    > ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ì½”ë“œë¥¼ í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì½”ë“œë¡œ ë°”ê¿”ë„ ì—¬ì „íˆ ì •ìƒ ë™ì‘í• ì§€ë¥¼ ë”°ì ¸ë³´ì!
    > 
    - ì˜ˆì™¸ëŠ” ì •í™•íˆ ì˜ˆìƒ ë°–ì˜ ë™ì‘ì¼ë•Œë§Œ ì“°ì—¬ì•¼ í•˜ë©°, í”„ë¡œê·¸ë¨ì˜ ì •ìƒ ë™ì‘ ë²”ì£¼ì— ë“¤ì§€ ì•ŠëŠ” ì˜¤ë¥˜ë¥¼ ë‚˜íƒ€ë‚¼ ë•Œë§Œ ì“°ì—¬ì•¼ í•œë‹¤.
    - ì •ìƒ ë™ì‘í•˜ì§€ ì•Šì„ ê²ƒ ê°™ë‹¤ë©´ ì˜ˆì™¸ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ê³  ì˜¤ë¥˜ë¥¼ ê²€ì¶œí•˜ì—¬ í”„ë¡œê·¸ë¨ì„ ì •ìƒ íë¦„ìœ¼ë¡œ ë˜ëŒë¦¬ê²Œë” ì²˜ë¦¬í•´ì•¼ í•œë‹¤.

### ì˜ˆì œ. Error ê°ì²´ë¥¼ ìƒì†  ë°›ì•„ ì •í™•í•œ ì˜¤ë¥˜ ì²˜ë¦¬

```jsx
// AS-IS
function localShippingRules(country) {
  const data = countryData.shippingRules[country]; // ì˜ˆìƒí•  ìˆ˜ ìˆëŠ” ì •ìƒë²”ì£¼ë¼ê³  ê°€ì •
  if (data) return new ShippingRules(data);
  else return -23;
}

function calculateShippingCost(anOrder) {
  const shippingRules = localShippingRules(anOrder.country);
  if (shippingRules < 0) return shippingRules;
}

const status = calculateShippingCost(orderData);
if (status < 0) errorList.push({ order: orderData, errorCode: status })
```

```jsx
// TO-BE
function localShippingRules(country) {
  const data = countryData.shippingRules[country]; // ì˜ˆìƒí•  ìˆ˜ ìˆëŠ” ì •ìƒë²”ì£¼ë¼ê³  ê°€ì •
  if (data) return new ShippingRules(data);
  else throw new OrderProcessingError(-23);
}

function calculateShippingCost(anOrder) {
  const shippingRules = localShippingRules(anOrder.country);
  if (shippingRules < 0) return shippingRules;
}

class OrderProcessingError extends Error {
  constructor(errorCode) {
    super(`ì£¼ë¬¸ ì²˜ë¦¬ ì˜¤ë¥˜: ${errorCode}`);
    this.code = errorCode;
  }
  get name() { return "orderProcessingError" }
}

// í´ë¼ì´ì–¸íŠ¸
try {
  calculateShippingCost(orderData);
} catch (e) {
  if (e instanceof OrderProcessingError) {
    errorList.push({ order: orderData, errorCode: e.code });
  } else {
    throw e;
  }

}
```

## 13. ì˜ˆì™¸ë¥¼ ì‚¬ì „í™•ì¸ìœ¼ë¡œ ë°”ê¾¸ê¸°

- ì˜ˆì™¸ëŠ” â€˜ëœ»ë°–ì˜ ì˜¤ë¥˜'ë¼ëŠ” ëœ»ì´ë‹¤. ë§ ê·¸ëŒ€ë¡œ ì˜ˆì™¸ì ìœ¼ë¡œ ë™ì‘í•  ë•Œë§Œ ì“°ì—¬ì•¼ í•œë‹¤.
- í•¨ìˆ˜ ìˆ˜í–‰ì‹œ ë¬¸ì œê°€ ë  ìˆ˜ ìˆëŠ” ì¡°ê±´ì„ í•¨ìˆ˜ í˜¸ì¶œ ì „ì— ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤ë©´, ì˜ˆì™¸ë¥¼ ë˜ì§€ëŠ” ëŒ€ì‹  í˜¸ì¶œí•˜ëŠ” ê³³ì—ì„œ ì¡°ê±´ì„ ê²€ì‚¬í•˜ë„ë¡ í•´ì•¼ í•œë‹¤.
```jsx
// AS-IS
class PublicPool {
  constructor(available, resource, allocated) {
    try {
      this.result = available.pop();
      allocated.add(this.result);
    } catch (e) {
      this.result = resource.create();
      allocated.add(this.result);
    }
  }
}

// TO-BE
class PublicPool {
  constructor(available, resource, allocated) {
    this.result = available.isEmpty() ? resource.create() : available.pop()
    allocated.add(this.result);
  }
}
```